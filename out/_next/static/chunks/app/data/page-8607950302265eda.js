(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{2898:function(e,t,a){"use strict";a.d(t,{Z:function(){return createLucideIcon}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,t)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:i="",children:x,...o},d)=>(0,s.createElement)("svg",{ref:d,...r,width:c,height:c,stroke:a,strokeWidth:n?24*Number(l)/Number(c):l,className:["lucide",`lucide-${toKebabCase(e)}`,i].join(" "),...o},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(x)?x:[x]]));return a.displayName=`${e}`,a}},7332:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},1827:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2844:function(e,t,a){Promise.resolve().then(a.bind(a,2650))},2650:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return DataPage}});var s=a(7437),r=a(2265),c=a(7332),l=a(1827),n=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function DataPage(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[x,o]=(0,r.useState)(0),[d,p]=(0,r.useState)(1),[m,h]=(0,r.useState)(50),[u,y]=(0,r.useState)(0),[g,f]=(0,r.useState)(""),[j,w]=(0,r.useState)("all"),[N,v]=(0,r.useState)("all"),[b,_]=(0,r.useState)("fetched_at"),[k,S]=(0,r.useState)("desc"),fetchData=async()=>{n(!0);try{let e=new URLSearchParams({page:d.toString(),pageSize:m.toString(),sortBy:b,sortOrder:k,...g&&{query:g},..."all"!==j&&{dateFilter:j},..."all"!==N&&{compFilter:N}});console.log("데이터 불러오기 요청:",e.toString());let a=await fetch("/api/load-data?".concat(e.toString()));if(!a.ok)throw Error("데이터 불러오기 실패: ".concat(a.status));let s=await a.json();console.log("데이터 불러오기 결과:",s),t(s.items),o(s.total),y(s.totalPages)}catch(e){console.error("Error fetching data:",e),t([]),o(0),y(0)}finally{n(!1)}},handleExport=async()=>{try{let t=["키워드,PC 검색량,모바일 검색량,총 검색량,카페문서수,블로그문서수,웹문서수,뉴스문서수,총문서수,잠재력점수,PC CTR,모바일 CTR,광고수,경쟁지수,시드활용,수집일시",...e.map(e=>[e.rel_keyword,e.pc_search,e.mobile_search,e.total_search||e.pc_search+e.mobile_search,e.cafe_count,e.blog_count,e.web_count,e.news_count,e.total_docs||e.cafe_count+e.blog_count+e.web_count+e.news_count,e.potential_score||0,e.ctr_pc,e.ctr_mo,e.ad_count,e.comp_idx,e.seed_usage||"N/A",new Date(e.fetched_at).toLocaleString("ko-KR")].join(","))],a=t.join("\n"),s=new Blob(["\uFEFF"+a],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(s),c=document.createElement("a");c.href=r,c.download="keywords_".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(r),document.body.removeChild(c)}catch(e){console.error("Export error:",e),alert("CSV 다운로드 중 오류가 발생했습니다.")}};(0,r.useEffect)(()=>{fetchData()},[d,m,g,j,N,b,k]);let formatNumber=e=>e>=1e4?"".concat((e/1e4).toFixed(1),"만"):e>=1e3?"".concat((e/1e3).toFixed(1),"천"):e.toLocaleString();return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-8 w-8 text-primary-600"}),(0,s.jsx)("h1",{className:"ml-2 text-xl font-bold text-gray-900",children:"데이터 관리"})]}),(0,s.jsx)("nav",{className:"flex space-x-4",children:(0,s.jsx)("a",{href:"/",className:"text-gray-600 hover:text-gray-900",children:"홈으로"})})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("div",{className:"card mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,s.jsx)("div",{className:"flex-1 min-w-64",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"키워드 검색...",value:g,onChange:e=>f(e.target.value),className:"input-field pl-10"})]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:j,onChange:e=>w(e.target.value),className:"input-field",children:[(0,s.jsx)("option",{value:"all",children:"전체 기간"}),(0,s.jsx)("option",{value:"today",children:"오늘"}),(0,s.jsx)("option",{value:"7days",children:"최근 7일"}),(0,s.jsx)("option",{value:"30days",children:"최근 30일"})]}),(0,s.jsxs)("select",{value:N,onChange:e=>v(e.target.value),className:"input-field",children:[(0,s.jsx)("option",{value:"all",children:"전체 경쟁도"}),(0,s.jsx)("option",{value:"high",children:"높음"}),(0,s.jsx)("option",{value:"medium",children:"중간"}),(0,s.jsx)("option",{value:"low",children:"낮음"})]}),(0,s.jsxs)("select",{value:"".concat(b,"-").concat(k),onChange:e=>{let[t,a]=e.target.value.split("-");_(t),S(a)},className:"input-field",children:[(0,s.jsx)("option",{value:"fetched_at-desc",children:"최신순"}),(0,s.jsx)("option",{value:"fetched_at-asc",children:"오래된순"}),(0,s.jsx)("option",{value:"potential_score-desc",children:"잠재지수 높은순"}),(0,s.jsx)("option",{value:"potential_score-asc",children:"잠재지수 낮은순"}),(0,s.jsx)("option",{value:"pc_search-desc",children:"검색량 높은순"}),(0,s.jsx)("option",{value:"pc_search-asc",children:"검색량 낮은순"})]})]}),(0,s.jsxs)("button",{onClick:handleExport,className:"btn-primary flex items-center gap-2",children:[(0,s.jsx)(i,{className:"h-4 w-4"}),"CSV 다운로드"]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"card text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:x.toLocaleString()}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"총 레코드"})]}),(0,s.jsxs)("div",{className:"card text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"낮음"===e.comp_idx).length}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"낮은 경쟁도"})]}),(0,s.jsxs)("div",{className:"card text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(e=>"중간"===e.comp_idx).length}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"중간 경쟁도"})]}),(0,s.jsxs)("div",{className:"card text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.filter(e=>"높음"===e.comp_idx).length}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"높은 경쟁도"})]})]}),(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:a?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-500",children:"데이터를 불러오는 중..."})]}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"데이터가 없습니다."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"키워드"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PC 검색량"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"모바일 검색량"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"총 검색량"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"카페문서수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"블로그문서수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"웹문서수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"뉴스문서수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"총문서수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"잠재력점수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PC CTR"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"모바일 CTR"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"광고수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"경쟁지수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"시드활용"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"수집일시"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.rel_keyword}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.pc_search)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.mobile_search)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.total_search||e.pc_search+e.mobile_search)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.cafe_count)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.blog_count)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.web_count)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.news_count)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:formatNumber(e.total_docs||e.cafe_count+e.blog_count+e.web_count+e.news_count)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((e.potential_score||0)>10?"bg-green-100 text-green-800":(e.potential_score||0)>5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(e.potential_score||0).toFixed(1)})}),(0,s.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.ctr_pc,"%"]}),(0,s.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.ctr_mo,"%"]}),(0,s.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.ad_count,"개"]}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("높음"===e.comp_idx?"bg-red-100 text-red-800":"중간"===e.comp_idx?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.comp_idx})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.seed_usage||"N/A"}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.fetched_at).toLocaleString("ko-KR")})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"페이지 크기:"}),(0,s.jsxs)("select",{value:m,onChange:e=>{h(Number(e.target.value)),p(1)},className:"input-field text-sm",children:[(0,s.jsx)("option",{value:10,children:"10"}),(0,s.jsx)("option",{value:50,children:"50"}),(0,s.jsx)("option",{value:100,children:"100"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>p(Math.max(1,d-1)),disabled:1===d,className:"btn-secondary text-sm disabled:opacity-50",children:"이전"}),(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:[d," / ",u]}),(0,s.jsx)("button",{onClick:()=>p(Math.min(u,d+1)),disabled:d===u,className:"btn-secondary text-sm disabled:opacity-50",children:"다음"})]})]})]})})})]})]})}},622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=a(2265),r=Symbol.for("react.element"),c=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var s,c={},x=null,o=null;for(s in void 0!==a&&(x=""+a),void 0!==t.key&&(x=""+t.key),void 0!==t.ref&&(o=t.ref),t)l.call(t,s)&&!i.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===c[s]&&(c[s]=t[s]);return{$$typeof:r,type:e,key:x,ref:o,props:c,_owner:n.current}}t.Fragment=c,t.jsx=q,t.jsxs=q},7437:function(e,t,a){"use strict";e.exports=a(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=2844)}),_N_E=e.O()}]);