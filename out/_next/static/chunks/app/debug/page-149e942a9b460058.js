(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{2898:function(e,s,t){"use strict";t.d(s,{Z:function(){return createLucideIcon}});var a=t(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:c=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:d,...o},x)=>(0,a.createElement)("svg",{ref:x,...l,width:c,height:c,stroke:t,strokeWidth:n?24*Number(r)/Number(c):r,className:["lucide",`lucide-${toKebabCase(e)}`,i].join(" "),...o},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(d)?d:[d]]));return t.displayName=`${e}`,t}},1981:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7332:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},2104:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7518:function(e,s,t){Promise.resolve().then(t.bind(t,6104))},6104:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return DebugPage}});var a=t(7437),l=t(2265),c=t(7332),r=t(3008),n=t(2104),i=t(1981),d=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),x=(0,d.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),m=(0,d.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function DebugPage(){var e;let[s,t]=(0,l.useState)(null),[d,h]=(0,l.useState)(!0),[u,p]=(0,l.useState)([]),[y,g]=(0,l.useState)(!1),[j,f]=(0,l.useState)(null),[N,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{fetchDebugInfo()},[]),(0,l.useEffect)(()=>{let e=null;return N&&(e=setInterval(async()=>{await checkAutoCollectStatus()},2e3)),()=>{e&&clearInterval(e)}},[N]);let fetchDebugInfo=async()=>{try{h(!0);let e=await fetch("/api/kv-health"),s=e.ok?await e.json():null,a=await fetch("/api/test-keys"),l=a.ok?await a.json():null,c=0,r=null;try{let e=await fetch("/api/load-data?page=1&pageSize=10");if(e.ok){let s=await e.json();c=s.total||0}else r="데이터 로드 실패: ".concat(e.status)}catch(e){r="데이터 로드 오류: ".concat(e)}t({kvStatus:s,apiStatus:l,dataCount:c,error:r})}catch(e){t({kvStatus:null,apiStatus:null,dataCount:0,error:"디버그 정보 수집 실패: ".concat(e)})}finally{h(!1)}},checkAutoCollectStatus=async()=>{try{let e=await fetch("/api/auto-collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"status"})});if(e.ok){let s=await e.json();if(f(s),g(s.isRunning||!1),s.isRunning){let e={timestamp:new Date().toISOString(),level:"info",message:"자동수집 진행 중: ".concat(s.currentKeywordIndex||0,"/").concat(s.totalKeywords||0),details:s};p(s=>[...s.slice(-49),e])}}}catch(e){console.error("자동수집 상태 확인 오류:",e)}},startAutoCollect=async()=>{try{let e=await fetch("/api/auto-collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"start",maxKeywords:5})});if(e.ok){let s=await e.json(),t={timestamp:new Date().toISOString(),level:"success",message:"자동수집 시작: ".concat(s.message),details:s};p(e=>[...e.slice(-49),t]),v(!0)}else{let s=await e.text(),t={timestamp:new Date().toISOString(),level:"error",message:"자동수집 시작 실패: ".concat(s),details:{status:e.status}};p(e=>[...e.slice(-49),t])}}catch(s){let e={timestamp:new Date().toISOString(),level:"error",message:"자동수집 시작 오류: ".concat(s),details:{error:String(s)}};p(s=>[...s.slice(-49),e])}},stopAutoCollect=async()=>{try{let e=await fetch("/api/auto-collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"stop"})});if(e.ok){let s=await e.json(),t={timestamp:new Date().toISOString(),level:"warning",message:"자동수집 중지: ".concat(s.message),details:s};p(e=>[...e.slice(-49),t]),v(!1),g(!1)}}catch(s){let e={timestamp:new Date().toISOString(),level:"error",message:"자동수집 중지 오류: ".concat(s),details:{error:String(s)}};p(s=>[...s.slice(-49),e])}};return d?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"디버그 정보를 수집하는 중..."})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"시스템 디버그"}),(0,a.jsx)("p",{className:"text-gray-600",children:"시스템 상태 및 데이터 접근성 확인"})]}),s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"KV 스토리지 상태"})]}),s.kvStatus?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-700",children:"KV 스토리지 연결됨"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["사용 가능: ",s.kvStatus.available?"예":"아니오"]}),(0,a.jsxs)("p",{children:["타입: ",s.kvStatus.type]}),(0,a.jsxs)("p",{children:["메서드: ",(null===(e=s.kvStatus.methods)||void 0===e?void 0:e.length)||0,"개"]})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{className:"text-red-700",children:"KV 스토리지 연결 실패"})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(i.Z,{className:"h-6 w-6 text-yellow-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"API 키 상태"})]}),s.apiStatus?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-700",children:"API 키 설정됨"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["SearchAd 키: ",s.apiStatus.totalSearchAdKeys||0,"개 설정됨"]}),(0,a.jsxs)("p",{children:["OpenAPI 키: ",s.apiStatus.totalOpenApiKeys||0,"개 설정됨"]}),s.apiStatus.searchAdKeys&&s.apiStatus.searchAdKeys.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"SearchAd 키 상세:"}),s.apiStatus.searchAdKeys.map((e,s)=>(0,a.jsxs)("p",{className:"ml-2 text-xs",children:["키 ",e.id,": ",e.hasLicense&&e.hasSecret&&e.hasCustomer?"완전 설정":"부분 설정"]},s))]}),s.apiStatus.openApiKeys&&s.apiStatus.openApiKeys.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"OpenAPI 키 상세:"}),s.apiStatus.openApiKeys.map((e,s)=>(0,a.jsxs)("p",{className:"ml-2 text-xs",children:["키 ",e.id,": ",e.hasClientId&&e.hasClientSecret?"완전 설정":"부분 설정"]},s))]})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{className:"text-red-700",children:"API 키 확인 실패"})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(c.Z,{className:"h-6 w-6 text-purple-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"데이터 상태"})]}),s.error?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{className:"text-red-700",children:"데이터 로드 실패"})]}),(0,a.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:s.error})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-700",children:"데이터 로드 성공"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("p",{children:["총 키워드 수: ",s.dataCount.toLocaleString(),"개"]})})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(o,{className:"h-6 w-6 text-indigo-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"자동수집 로그"})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsxs)("button",{onClick:startAutoCollect,disabled:y,className:"btn-success flex items-center gap-2",children:[(0,a.jsx)(x,{className:"h-4 w-4"}),"자동수집 시작"]}),(0,a.jsxs)("button",{onClick:stopAutoCollect,disabled:!y,className:"btn-danger flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-4 w-4"}),"자동수집 중지"]}),(0,a.jsx)("button",{onClick:()=>{p([])},className:"btn-secondary flex items-center gap-2",children:"로그 클리어"})]}),j&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"상태:"})," ",j.isRunning?"실행 중":"중지됨"]}),j.isRunning&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"진행률:"})," ",j.currentKeywordIndex||0,"/",j.totalKeywords||0]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"현재 키워드:"})," ",j.currentKeyword||"N/A"]})]})]})}),(0,a.jsx)("div",{className:"bg-black text-green-400 p-4 rounded-lg font-mono text-sm max-h-96 overflow-y-auto",children:0===u.length?(0,a.jsx)("div",{className:"text-gray-500",children:"로그가 없습니다. 자동수집을 시작해보세요."}):u.map((e,s)=>(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:new Date(e.timestamp).toLocaleTimeString()}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("success"===e.level?"bg-green-900 text-green-300":"warning"===e.level?"bg-yellow-900 text-yellow-300":"error"===e.level?"bg-red-900 text-red-300":"bg-blue-900 text-blue-300"),children:e.level.toUpperCase()})]}),(0,a.jsx)("div",{className:"ml-2",children:e.message}),e.details&&(0,a.jsx)("div",{className:"ml-4 text-xs text-gray-400",children:JSON.stringify(e.details,null,2)})]},s))})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{onClick:fetchDebugInfo,className:"btn-primary",children:"새로고침"})})]})]})})}},622:function(e,s,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(2265),l=Symbol.for("react.element"),c=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,t){var a,c={},d=null,o=null;for(a in void 0!==t&&(d=""+t),void 0!==s.key&&(d=""+s.key),void 0!==s.ref&&(o=s.ref),s)r.call(s,a)&&!i.hasOwnProperty(a)&&(c[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===c[a]&&(c[a]=s[a]);return{$$typeof:l,type:e,key:d,ref:o,props:c,_owner:n.current}}s.Fragment=c,s.jsx=q,s.jsxs=q},7437:function(e,s,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=7518)}),_N_E=e.O()}]);